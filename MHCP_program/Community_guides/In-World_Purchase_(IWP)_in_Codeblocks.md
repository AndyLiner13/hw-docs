# In-World Purchase (IWP) in Codeblocks
...
## Introduction

 Creator Skill Level Intermediate Recommended Prerequisite Background Knowledge An understanding of Intermediate Codeblock Scripting, [Persistent Player Variables](https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/quests-leaderboards-and-variable-groups/variable-groups/managing-persistent-variables-associated-with-a-variable-group), and [Basic Asset Spawning](https://developers.meta.com/horizon-worlds/learn/documentation/mhcp-program/community-tutorials/part-one-understanding-asset-spawning-with-seeingblue) is recommended. Note: IWP creation is now available in the Desktop Editor. Visit the [documentation](https://developers.meta.com/horizon-worlds/learn/documentation/mhcp-program/monetization/meta-horizon-worlds-inworld-purchase-guide) for more information on this. Description In this document, we will go over the different types of In-World Purchases
(IWPs), how to create each one, their related codeblocks, and some examples of how
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Introduction
...
to use them. Learning Objectives By reading and reviewing this written guide you will be able to:
• Understand the IWP item types and related codeblock events, actions, operators,
and values.
• Create all IWP item types including durable items with and without assets,
auto-use and manual-use consumables, and group consumables together using item packs.
• Create purchases for members-only areas in your worlds, offer tangible items via
the player’s inventory, and sell consumables to enhance gameplay.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks

  
### IWP Types


•  Durable without Asset
  • Permanent (unless deleted by the user)
  • Used as a permanent status on a player, like VIP.
•  Durable with Asset
  • Permanent (unless deleted by the user)
  • Unlimited uses
  • Retrieved from player’s Horizon inventory
  • Used for items players can spawn/despawn from their inventory.
•  Consumable with Auto-Use
  • One-time use (can be repurchased)
  • Consumed immediately after purchase, does not appear in inventory
  • Does not require confirmation
  • Used for temporary statuses, time-based upgrades, and more
•  Consumable without Auto-use
  • One-time use per purchase, can stack multiple purchases
  • Consumed from Horizon’s Inventory
  • Requires confirmation (via codeblocks) before consumption
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks

  
### IWP Types
...
  • Used for temporary statuses, time-based upgrades, and more
•  Item Packs
  • Created out of Consumables without Auto-use items.
  • Allows you to combine a consumable into a stack of multiples.
  • Used to discount the sale of multiple consumables at once.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks

 Broadcast Events ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/461828106_558937446644211_4069079405675549335_n.png?_nc_cat=108&ccb=1-7&_nc_sid=e280be&_nc_ohc=UukR0mC3zSUQ7kNvwEgytJ4&_nc_oc=AdmlTHVSPkfzVmRoEnVsK4RPIWnx3KZEUUhVWzIQVriq8EEhK692s_fv0FtrfAjq_9E&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player starts purchase item (broadcast)”
  • Broadcast Event - Can be heard from any script in the world
  • Parameters
   • `player`: A reference to the player who started the purchase
   • `itemId`: A string containing the name/id of the item being purchased.
  • This can be used on any script where you need to know when a purchase is
started.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461872321_558937569977532_4169706045827159329_n.png?_nc_cat=110&ccb=1-7&_nc_sid=e280be&_nc_ohc=6fCLLU8frrMQ7kNvwFN9Vyu&_nc_oc=AdmvNhfb600y0EAGH_yozaiaQWhNP72kRmLAoevQpJobFL8v21zcxUDVRsY4im-NaUA&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AfdrMl-7xqbwQ...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player completes purchase item (broadcast)”
  • Broadcast Event - Can be heard from any script in the world
  • Parameters
   • `player`: A reference to the player who completed the purchase
   • `itemId`: A string containing the name/id of the item purchased.
   • `success`: A boolean letting us know if the purchase succeeded or failed.
  • This can be used on any script where you need to know when a purchase is
completed successfully or not.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461742436_558937363310886_7632016646801491315_n.png?_nc_cat=100&ccb=1-7&_nc_sid=e280be&_nc_ohc=g_rg1CUEtkEQ7kNvwHWX-Wg&_nc_oc=AdmveIfWeU3ywLRjPo8Zo5mQCH-scgpancNwB8fCnvPOhwWXcuu97cEey8o92Mwwk9Y&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AffurOaR4mPPPt...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player starts consume item (broadcast)”
  • Broadcast Event - Can be heard from any script in the world
  • Parameters
   • `player`: A reference to the player who started the consumption.
   • `itemId`: A string containing the name/id of the item being consumed.
  • This can be used on any script where you need to know when consumption is
started.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461947158_558937576644198_8509130094477816769_n.png?_nc_cat=106&ccb=1-7&_nc_sid=e280be&_nc_ohc=3P8aemQGx0cQ7kNvwES3-Lz&_nc_oc=AdkH7LmwZaiZ4ZXLVW1_VwBBpuF7wGYH25MifOKDFxb5khqnUiYAijVXZaJoqo3pUnc&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AffcWMxQ...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player completes consume item (broadcast)”
  • Broadcast Event - Can be heard from any script in the world
  • Parameters
   • `player`: A reference to the player who completed the consumption
   • `itemId`: A string containing the name/id of the item consumed.
   • `success`: A boolean letting us know if the consumption succeeded or failed.
  • This can be used on any script where you need to know when consumption is
completed successfully or not.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/462013257_558937543310868_2866554405895002171_n.png?_nc_cat=109&ccb=1-7&_nc_sid=e280be&_nc_ohc=4s6eF88iXjsQ7kNvwFds5QZ&_nc_oc=AdkNdg-qdP5BTfQLVOhuUgZe1d-njD4FR8B2dES9byOKOXjayJ7BFxGKYJELdk2CMuc&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afdtnq_w...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when an asset spawns from player inventory”
  • Broadcast Event - Can be heard from any script in the world
  • Parameters
   • `obj`: A reference to the object that spawned from the player’s inventory.
   • `asset`: A reference to the asset used to spawn the object.
   • `player`: A reference to the player that spawned the item from their inventory.
  • This can be used on any script where you need to know when an item has spawned
from a player’s inventory.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 Non-broadcast Events ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461860683_558937423310880_5802107090403536248_n.png?_nc_cat=102&ccb=1-7&_nc_sid=e280be&_nc_ohc=u5WoPpA_5EYQ7kNvwGBd7hk&_nc_oc=AdkGkibNPKQaYwhj3-9JSsReVd6Dvvlpm2uGZ3Lg3bTUMwIIVu1pRuHT-TTK2ehxexg&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&o...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player purchase succeeds on item”
  • Standard Event - Script must be attached to an In-World Item gizmo.
  • Parameters
   • `player`: A reference to the player that purchased the item.
  • This can be used in a script attached to a specific In-World Item gizmo that you
need to know when a purchase of that item is successful.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461795097_558937546644201_8837716101915000798_n.png?_nc_cat=111&ccb=1-7&_nc_sid=e280be&_nc_ohc=d0cRpgzLeSkQ7kNvwF7YWOw&_nc_oc=AdksZPd1qx3bBUytzBHQ8yzCQtjOySNzo0pS_JACptgdWviVhmem8tqn437ChP6bo_I&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afculweq3a0y...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player purchase fails on item”
  • Standard Event - Script must be attached to an In-World Item gizmo.
  • Parameters
   • `player`: A reference to the player that attempted to purchase the item.
  • This can be used in a script attached to a specific In-World Item gizmo that you
need to know when a purchase of that item fails.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461976591_558937583310864_878520296293413428_n.png?_nc_cat=103&ccb=1-7&_nc_sid=e280be&_nc_ohc=XG7UxO5RajsQ7kNvwGHcrzb&_nc_oc=AdnBo4F67YEJOJlYthFDpEdKtGLstDp_7w2_uU4W11HlWO0_3Za3CTZ2aTYuRLURTgM&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player consume succeeds on item”
  • Standard Event - Script must be attached to an In-World Item gizmo.
  • Parameters
   • `player`: A reference to the player consumed the item.
  • This can be used in a script attached to a specific In-World Item gizmo that you
need to know when the item is consumed successfully.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461730009_558937549977534_9215645537090210231_n.png?_nc_cat=104&ccb=1-7&_nc_sid=e280be&_nc_ohc=aJ-fukyHAlkQ7kNvwHOPkox&_nc_oc=AdlEklQftBCPJdYbaSGHnkV6QZ96P4SN0j48f3QKZ7Z8XVBROKS_paRVUrJsob73Oo0&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AfckIwQV...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player consume fails on item”
  • Standard Event - Script must be attached to an In-World Item gizmo.
  • Parameters
   • `player`: A reference to the player that attempted to consume the item.
  • This can be used in a script attached to a specific In-World Item gizmo that you
need to know when the item failed to be consumed.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/461742624_558937533310869_3315324053455887134_n.png?_nc_cat=109&ccb=1-7&_nc_sid=e280be&_nc_ohc=95e_-TX9yTEQ7kNvwHPsGNz&_nc_oc=AdnMvni3qrcojUyusG-TW8m4VvbnqrlynHPp468sczb9iwL2zD5ZuUK6J_AVds4RXTI&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afd6ltiJhow...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “when player try to consume item”
  • Standard Event - Script must be attached to an In-World Item gizmo.
  • Parameters
   • `player`: A reference to the player that’s trying to consume the item.
  • This can be used in a script attached to a specific In-World Item gizmo that you
need to know when the item is attempted to be consumed.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 Actions ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461688556_558937503310872_7649843234651612191_n.png?_nc_cat=100&ccb=1-7&_nc_sid=e280be&_nc_ohc=_ZMAt3KSzQYQ7kNvwH7wUeD&_nc_oc=Adn-_VqrOzFmxYWTydHROCwr13zNPfns5OMIfKhJAMsiU0aX8xy4ER2xZdZcZ8W9aL8&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zM...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “consume item for player”
  • Required Parameters
   • `player`: A reference to the player to consume the item.
   • `itemId`: A reference to the item to be consumed.
    • Note : This is an Input Value found under the Values category of your Script gizmo.
  • This is to be used to confirm the consumption of a Consumable without Auto-use.
  ...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 Operators ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461974836_558937439977545_6340259987809215145_n.png?_nc_cat=111&ccb=1-7&_nc_sid=e280be&_nc_ohc=wXgVpjR-XZAQ7kNvwF_L8Vk&_nc_oc=AdnSoaRNlfg6bfAEVs6vP-1M90fgSjmkx0D3ONgafPVeFCXpgLZ4S-LnoklUKKxsLGE&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AfdTLek...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “player owns item”
  • Required Parameters
   • `player`: A reference to the player we’re checking.
  • Returns a boolean that tells us whether the player owns the selected In-World
item.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461742917_558937506644205_5976681854130956775_n.png?_nc_cat=101&ccb=1-7&_nc_sid=e280be&_nc_ohc=eeQQON8mvyMQ7kNvwFMr-rR&_nc_oc=AdndOi9x8G53msGRDc6n7wtYg6LEM3xNLS63o9RTug0A0MLgfaw0tcL71_dXwcuCfGY&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afdp36Sedwfvxo...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “player owns item quantity”
  • Required Parameters
   • `player`: A reference to the player we’re checking.
  • Returns a number that tells us how many of the selected Consumable without Auto-use the player owns.
  ...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461797566_558937459977543_901849217770869654_n.png?_nc_cat=101&ccb=1-7&_nc_sid=e280be&_nc_ohc=AHj-N4XFHsAQ7kNvwHq4gUl&_nc_oc=Adly_ireHtpwFy_XcKWcy9mFuukD1-EJjQ-s-FcrFufOOAIhyV7Z4tqTM37mZlqNu1M&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AffAhcNUwfsl...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “time since player consumed item”
  • Required Parameters
   • `player`: A reference to the player we’re checking.
  • Returns a number based on the selected value from a dropdown menu. Options are
seconds, minutes, and days. The returned number represents how many seconds,
minutes, or days that have passed since the item was consumed.
   • Note: Returns a 0 if the item has never been consumed. Recommended that you use this
in conjunction with the “player has consumed item” codeblock.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/461825844_558937443310878_2067734326099493470_n.png?_nc_cat=108&ccb=1-7&_nc_sid=e280be&_nc_ohc=AAaMWKhF2foQ7kNvwHkd-To&_nc_oc=AdmE5iv87UDoR2laNCzxdBCWaZiUKwnkbivcsC-ot7DCcGotV-M7woapzyFNICW5VbE&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afe-ILsWUJkiTA...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “player has consumed item”
  • Required Parameters
   • `player`: A reference to the player we’re checking.
  • Returns a boolean that tells us whether the player has consumed the selected
item.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
 Values ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461976591_558937589977530_5446846885349310805_n.png?_nc_cat=103&ccb=1-7&_nc_sid=e280be&_nc_ohc=7pX7qVCdSEAQ7kNvwHxrQ21&_nc_oc=Adn_Nus6N4VLT7MERAupeqo2hcLpxkIHF6iCe6liYj3pL5QRaZgIWTa3sxlvdXDzH5A&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zM...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks
...
### IWP Codeblocks
...
• “in-world items”
  • Contains a dropdown menu that lets you select an In-World Item ID to be used
when making conditional checks in your IF statements.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Understanding IWP Item Types and Related Codeblocks

  
### IWP Types
...
### IWP Codeblocks
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP

 Creating and implementing IWPs involves a series of steps from item creation to
placement in your world. This section will walk you through the process of
setting up IWPs, including naming, pricing, and configuring item properties. You’ll
learn how to create durable and consumable items, add them to your world, and
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
customize their appearance and functionality. Step 1: While in build mode, open your build menu, navigate to Systems, and click Commerce then Create Item. ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461683576_558937513310871_2554100072706911353_n.png?_nc_cat=104&ccb=1-7&_nc_sid=e280be&_nc_ohc=6O8r6BXCJKUQ7kNvwE3ysJL&_nc_oc=AdmquD0AkSoltE3zgQIOHs8imqS-RXBPgjzTut0cNdvWDRUkdreTnyFWozusPPIspjU&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zM...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
 Step 2: Every IWP you create requires a Name, Sell Price, Thumbnail, and selected Item type.
|  |
|  |
|   |   |
| Asset reference is optional. Leaving it blank will create a Durable Item without an Asset (permanent player statuses). Adding an Asset will create a Durable Item with Asset, like a permanent weapon, hat, etc… | Decide if your consumable will be automatically consumed upon purchase or allow the user to consume it from their inventory with Auto use. |

 Note:Description is an optional field, but it is recommended that you provide a detailed
description to help users understand what they are buying. Step 3: Once your In-World Item has been created, you can grab an In-World Item gizmo
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
from your build menu and drag it into your world. ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461688156_558937523310870_6289736828187432400_n.png?_nc_cat=107&ccb=1-7&_nc_sid=e280be&_nc_ohc=OFKjynkzXSwQ7kNvwFQp2-k&_nc_oc=AdmKEktSVQVSC7ny0Al25wtXJ6AwdUrBwbliSGVhrUBdpmqhnCZFVSg9UvM2CM6q65U&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AfdsuRwxTg9...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
 Step 4: Open the property panel for your In-World Item gizmo and there are several
settings you can change here:
• Hit Select next to In-World Item and select the In-World Item associated with this gizmo.
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
 ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461835191_558937536644202_1528060342302655134_n.png?_nc_cat=100&ccb=1-7&_nc_sid=e280be&_nc_ohc=scIkhRJPsdoQ7kNvwHP7bFo&_nc_oc=AdmXzREBaleQZHwXnRnUZTFLj8PzmvwLaDEXHMPbqq65bseRmaDISf8i-RNZ5QmCuaM&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_AfdVoJa6dfe68sm5IYKaRKB2hpUsjHy...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating an IWP
...
• Click the dropdown next to UI Property and change the display style of your gizmo.


|  |
|  |
|   |   |   |


• This is also where you would attach any scripts using the non-broadcast event
codeblocks described under the IWP Codeblocks section.

 Now your IWP is ready for purchase!  
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating Item Packs

 This section will guide you through the process of creating and selling Item
Packs, including how to access the feature, select items, set quantities and
prices, and make them available for purchase in your game. Item Packs consist of Consumables without Auto-use offering players the ability to purchase items in bulk. You can create one by
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating Item Packs
...
opening your build menu, navigating to Systems then Commerce, selecting Item Packs, and clicking Create Item Pack. ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/461857884_558937456644210_2326314548428903926_n.png?_nc_cat=109&ccb=1-7&_nc_sid=e280be&_nc_ohc=TWnF8aBqW-EQ7kNvwHW1hh-&_nc_oc=Adm0hsLqdQ32MeweTT6SHEDUOIJEgtMohnTOHUqBtfhUT3ysg7v5pHUFcbjG4cWaBCs&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating Item Packs
...
 The next window will ask you which Consumable without Auto-use you would like to make an Item Pack out of. Once selected you can choose an Item quantity between 2 and 99 then select your Sell Price. ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461878408_558937519977537_2913137907270513473_n.png?_nc_cat=106&ccb=1-7&_nc_sid=e280be&_nc_ohc=BrtQ5ZWZ0t0Q7kNvwEsXjUW&_nc_oc=AdnznoklCqsRBY_A2TPjZf3dhpDMdpqK3cXW4asTJpZ-1EZVECxx0d6cPXBkLhlPcAk&_nc_zt=14&_nc_ht=scontent-dfw...
...
# In-World Purchase (IWP) in Codeblocks
...
## Creating Item Packs
...
 Once created you can follow the same steps 3-4 in the previous section, Creating an IWP, to start selling your item pack.  
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable without Asset

 VIP Area Required: Durable Item without Asset. Follow steps 1-4 under Creating an IWP to create the VIP commerce, and setup the related In-World Item gizmo. Then pull out a Trigger Gizmo to get started Durable items without assets are straightforward since all you can do is check
if the player owns the IWP. In this example, the script below is attached to a Trigger gizmo that covers our
VIP area. When a player enters the trigger, we will check if they own this item
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable without Asset
...
and respawn them if they do not. ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461957051_558937409977548_2001440408993131692_n.png?_nc_cat=106&ccb=1-7&_nc_sid=e280be&_nc_ohc=ATgL91mwNSAQ7kNvwF57klF&_nc_oc=AdmQm35rFsYyJJ4VRVMIKPP42eDVQZ-GUB7guuPUkHBq64-KAI1AAPhjWaV8BH3ICYI&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=00_Afer1i...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable without Asset
...
 This is created by using the when trigger is entered by player event codeblock with an IF statement inside. We use a NOT operator and drag the player owns item codeblock inside of it. Using the player parameter from the event and an in-world items input value, we can complete this IF statement and respawn our players.  
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable with Asset

 Spawning from Player Inventory Required: Durable Item with Asset. Follow steps 1-4 under Creating an IWP to create your durable item with asset commerce by assigning an asset from your
asset library, and setup the related In-World Item gizmo. Then choose any object to run the following script. You will need to
create an asset variable in your script, I called mine assetToSpawn and I linked it to the same asset from my asset library that I used when
creating the Durable Item. Durable items with assets do not require scripts, but what if we need to
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable with Asset
...
communicate with the item our player spawned? This script can run anywhere in the world since it uses a broadcast event. ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461857291_558937556644200_2432027789069136617_n.png?_nc_cat=103&ccb=1-7&_nc_sid=e280be&_nc_ohc=ygWDAZixeQYQ7kNvwFtagr2&_nc_oc=AdkrRExmEFHxhl2t0y87FHhtCLbJDo0dgT6rWe01ue5kYxXRkabEQdae8CBdCryhuDI&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPT...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Durable with Asset
...
 Using the when an asset spawns from player inventory codeblock we get the object that spawned, the asset it was created from, and
the player who spawned it. Since this is a broadcast event that will fire on any
item spawning from any player, we’re going to check that the asset received by
the event is the one we want by using an IF statement to compare the parameter to
a specific asset variable in our script. Once we determine this is our asset, we
can now send an event to the newly spawned object with our player as a
parameter for the object to receive.  
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use

 30-VIP Access Required: Consumable with Auto-Use. Follow steps 1-4 under Creating an IWP to create the VIP consumsable with auto-use, and setup the related In-World Item gizmo. Then pull out a Trigger Gizmo to get started In this example, we use a consumable to provide time-based(30 days) access to
our users for their purchase. This script runs on a trigger gizmo that covers our
VIP area. Note: Because the script is too wide, I had to cut and modify the IF statement to
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
show on two lines. ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461976494_558937583310864_878520296293413428_n.png?_nc_cat=103&ccb=1-7&_nc_sid=e280be&_nc_ohc=XG7UxO5RajsQ7kNvwGHcrzb&_nc_oc=AdnBo4F67YEJOJlYthFDpEdKtGLstDp_7w2_uU4W11HlWO0_3Za3CTZ2aTYuRLURTgM&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
 This script uses the IF statement and the NOT operator just like in our previous example. We also incorporate the AND operator so we can check two conditions. First, we use the player has consumed item codeblock to tell us if they have consumed the item, then we use the time since player consumed item codeblock in conjunction with the LESS THAN operator and number input value to determine if it has been less than 30 days since they consumed.
Because of our AND operator, if one of these conditions returns false, they will be teleported
away from the area. Restore Health Required: Consumable with Auto-Use. Follow steps 1-4 under Creating an IWP to create the Health Restore consumable with auto-use, and setup the related In-World Item gizmo. In this example, our users can purchase an instant health restore. This script
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
is attached to the In-World Item gizmo and the events below will fire when the
item is purchased. Note: This script assumes you have a player manager listening for the restoreHealth
event. We don’t have any need for the when player purchase succeeds on item or when player purchase fails on item events, but I wanted to show that they still fire. We wait for the when player consume succeeds on item event to fire, although since this is an auto-consumed item, we could have also
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
sent restoreHealth under the when player purchase succeeds on item event too. ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461900167_558937563310866_6112818593593678494_n.png?_nc_cat=110&ccb=1-7&_nc_sid=e280be&_nc_ohc=4dseJM7TpKQQ7kNvwH9O5UV&_nc_oc=AdmQ0IfO1SqRv7djSnHQINMW5d4cORjsg7WtrzIjeBoaSTBTLtH5-_qp-TkEwIJpgCw&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtY...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
 Below you’ll see an example of my player manager script to give you an idea of
what that looks like. This script can be ran on any object in the world and
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
listens for events being sent to players. ![Image](https://scontent-dfw5-3.xx.fbcdn.net/v/t39.2365-6/461981641_558937419977547_840786302865238297_n.png?_nc_cat=108&ccb=1-7&_nc_sid=e280be&_nc_ohc=b69363sfY-8Q7kNvwFUZLeS&_nc_oc=AdlMd16P0_c01u1DvgqckV4QXDWoRISLHRsQWyrDqk-0QjQwj2l8KU4tQNr2zIBJ5s4&_nc_zt=14&_nc_ht=scontent-dfw5-3.xx&_nc_gid=J7-f9zMPThdtYDGfTEAZNw&oh=...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
 Coin Shop Required: Consumable with Auto-Use. Follow steps 1-4 under Creating an IWP to create the Coin consumsable with auto-use, and setup the related In-World Item gizmo. This is the same script as the previous Restore Health script, but I also wanted to show that you could set a Player-Persistent
Variable. This script is attached to the In-World Item gizmo and the events below will
fire when the item is purchased. In this example, the user purchases 100 coins so we need to add the coins to
their Coins PPV. We use the set player persistent var to codeblock with a + operator to add their current Coin PPV that we retrieved
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable with Auto-Use
...
using the get user persistent var codeblock to a number input value of 100. ![Image](https://scontent-dfw5-1.xx.fbcdn.net/v/t39.2365-6/461688722_558937579977531_291030443651548477_n.png?_nc_cat=110&ccb=1-7&_nc_sid=e280be&_nc_ohc=RX-ZyYuVy4IQ7kNvwGLcb4G&_nc_oc=AdmsjE7IDTrXo8sY-i8WC3HUrAk_Ia4ORe9mgkHpOzI3jc442_CF28uMqIvQGQfNFZM&_nc_zt=14&_nc_ht=scontent-dfw5-1.xx&_nc_gid=J7-f9zMPThdtY...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable without Auto-use

 Example: Manual Health Restore Required: Consumable without Auto-Use. Follow steps 1-4 under Creating an IWP to create the Health Restore consumsable without auto-use, and setup the
related In-World Item gizmo. In this example we show how to handle manual consumption of an In-World Item
without auto-use, meaning the item is stored in the player’s inventory and consumed
when they are ready. This script is attached to the In-World Item gizmo and the
events below will fire when the item is consumed. The important thing to note when a player tries to consume a Consumable without Auto-use is that you must recognize this using the when player try to consume itemfrom inventory codeblock and decide whether to acknowledge this attempt using the consume item for player codeblock before the consumption is considered successful, otherwise, the
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs
...
### Consumable without Auto-use
...
consumption will fail. Refer to the previous example, Restore Health, to see what a player manager script would look like. ![Image](https://scontent-dfw5-2.xx.fbcdn.net/v/t39.2365-6/461732831_558937416644214_556034990091293698_n.png?_nc_cat=102&ccb=1-7&_nc_sid=e280be&_nc_ohc=Som_WHBleT4Q7kNvwEAVnP0&_nc_oc=AdnBTanF-UF1reA_s5gVMRaoRdFMd06vNTpQjRkZttzt6BW74GeFnSXFGOLeFXo1U4o&_nc_zt=14&_nc_ht=scontent-dfw5-2.xx&_nc_gid=J7-f9zM...
...
# In-World Purchase (IWP) in Codeblocks
...
## Examples: Implementing & Selling IWPs

 In the following section, we will apply what we learned in the previous sections
to build practical applications for our world. Some examples will include
developing members-only area, an inventory system for weapons or other items,
consumable health potions, and a simple item shop. These examples will demonstrate how
to implement common gameplay mechanics, allowing players to access restricted
areas, manage their inventory, use items, and make purchases within the game.  
### Durable without Asset
...
### Durable with Asset
...
### Consumable with Auto-Use
...
### Consumable without Auto-use
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Extended Learning

 To reinforce your understanding of IWP mechanics and put your new skills into
practice, try completing the hands-on challenges provided below: Challenge 1: Create a basic auto-use and manual-use consumable, then purchase and consume it
in build mode. Additionally, go on to create an item pack out of the manual-use
consumable. Challenge 2: Create a basic durable item with and without an asset, then purchase and use it
in build mode.  
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Further Assistance

 For any questions or further assistance, creators are encouraged to join the
discussion on the Discord server or to schedule a mentor session for personalized
guidance.    ![Nav Logo](https://static.xx.fbcdn.net/rsrc.php/yE/r/3SoBlk8EqOQ.svg)


[Facebook](https://www.facebook.com/MetaHorizon/)
[Threads](https://www.threads.com/@metahorizon)
[X](https://x.com/MetaHorizon)
[Instagram](https://www.instagram.com/metahorizon/)
[YouTube](https://www.youtube.com/@MetaQuestVR)

 Learn
[Documentation](https://developers.meta.com/horizon-worlds/learn/documentation/)
[Blog](https://developers.meta.com/horizon/blog/)
[Forum](https://communityforums.atmeta.com/t5/Creator-Forum/ct-p/Meta_Horizon_Creator_Forums)

 Programs
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Further Assistance
...
[Meta Horizon Creator Program](https://developers.meta.com/horizon-worlds/programs/)

 My Creations
[My Worlds](https://horizon.meta.com/creator/worlds_all/?utm_source=horizon_worlds_creator)
[My Assets](https://horizon.meta.com/creator/assets/?utm_source=horizon_worlds_creator)
[Performance](https://horizon.meta.com/creator/performance/traces/?utm_source=horizon_worlds_creator)

 Privacy & Legal
[Privacy Policy](https://www.meta.com/legal/privacy-policy/)
[Legal](https://www.meta.com/legal/supplemental-terms-of-service/)

 © 2025 Meta
...
...
# In-World Purchase (IWP) in Codeblocks
...
## Additional Links
- [Meta home](https://developers.meta.com/horizon-worlds/)
- [Login](https://developers.meta.com/login/?redirect_uri=https%3A%2F%2Fdevelopers.meta.com%2Fhorizon-worlds%2Flearn%2Fdocumentation%2Fmhcp-program%2Fcommunity-tutorials%2Fin-world-purchase-iwp-in-codeblocks%2F)
...
# In-World Purchase (IWP) in Codeblocks

 Author: SeeingBlue  
## Introduction
...
## Understanding IWP Item Types and Related Codeblocks
...
## Creating an IWP
...
## Creating Item Packs
...
## Examples: Implementing & Selling IWPs
...
## Extended Learning
...
## Further Assistance
...
      Learn
# In-World Purchase (IWP) in Codeblocks
...
