Source: https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/assets/data-as-an-asset

# Data as an Asset

Data as an Asset makes it easier to ingest and access a large amount of data. You can use this data to generate and populate your worlds with content for players as part of a live service model.

<details>
<summary>Image Content</summary>

<p></p>

[All image details and metadata](../../image_data/9d93ec9733ae16786bcca26d66c99f0faa2143deb272b21c9570eb4c19e25925.md)

### Overview
The image presents a collage of user interface elements related to asset management and upload processes, specifically focusing on desktop and web asset uploads. The layout includes multiple panels and windows showcasing different functionalities within a software environment.

### Key Elements
1. **Left Panel (Asset Management)**:
   - **Visual description**: A dark-themed sidebar with a menu.
   - **Location**: Left side of the image.
   - **Contents**: Contains options like "Assets," "Console," and "Tests." The "Add New" section is expanded, showing sub-options such as "Folder," "3D Model," "Audio," "Material," "Skydome," and "Texture."
   - **Visual styling**: Dark background with light text and icons.

2. **Top Center Panel (Code Snippet)**:
   - **Visual description**: A code snippet displayed in a light background.
   - **Location**: Top center of the image.
   - **Contents**: Contains JSON-like data entries with fields such as "qns_type," "difficulty," "category," "question," "correct_answer," and "incorrect_answers."
   - **Visual styling**: Black background with white text.

3. **Right Panel (Asset Upload Interface)**:
   - **Visual description**: A window titled "View All" with a search bar and a dropdown menu.
   - **Location**: Right side of the image.
   - **Contents**: Displays a list of assets under "My Worlds" and "My Assets." There is a search bar with the term "trivia" entered, and a dropdown menu showing results categorized into "3D model," "Sound," "Texture," and "Text."
   - **Visual styling**: Light background with blue accents and icons.

4. **Bottom Center Panel (Console Output)**:
   - **Visual description**: A console window displaying messages and logs.
   - **Location**: Bottom center of the image.
   - **Contents**: Contains text entries related to asset management, including JSON questions and console outputs.
   - **Visual styling**: Dark background with white text.

5. **Arrows and Connections**:
   - **Visual description**: Arrows connecting the left panel to the bottom and right panels.
   - **Location**: Connecting the left panel to the bottom and right panels.
   - **Contents**: Indicates a flow or relationship between the asset management panel and the asset upload interface.

### Visual Flow / Relationships
- **Most prominent visually**: The central theme revolves around asset management and upload processes.
- **Arrows indicate**: A flow from the asset management panel to the console output and the asset upload interface.
- **Spatial relationships**: Elements are arranged in a grid-like structure, with the asset management panel on the left, the console output at the bottom, and the asset upload interface on the right.

</details>

<p></p>



## Requirements

* For Web Asset ingestion, you need access to your team’s Asset Library to upload the assets to the library.

## Uploading Assets to the backend

### Web Asset upload

<details>
<summary>Image Content</summary>

<p></p>

[All image details and metadata](../../image_data/922019937bcada8964a454ca6b554db8f66dd19a93249b829c179b9d8d11edf2.md)

### Overview
The image depicts a user interface for managing assets within a platform named "Meta Horizon." The layout includes a sidebar with navigation options and a main content area displaying a placeholder message and an illustration.

### Key Elements
- **Sidebar (Left Panel)**:
  - **My Worlds**: A folder icon followed by the text "My Worlds," with a downward arrow indicating a dropdown menu.
  - **My Assets**: A folder icon followed by the text "My Assets," highlighted in blue, suggesting it is the currently selected option.
  - **Create New Folder**: A blue button labeled "+ Create New Folder."
  - **View All**: A folder icon followed by the text "View All."
  - **My Assets**: Another folder icon followed by the text "My Assets," repeated as a link.
  - **Removed Assets**: A trash can icon followed by the text "Removed Assets."

- **Main Content Area (Center)**:
  - **Title**: "My Assets" displayed prominently at the top.
  - **Search Bar**: A search bar with the placeholder text "Search assets."
  - **Placeholder Message**: "No assets yet" displayed below the search bar.
  - **Illustration**: An illustration of a person holding a pencil, standing next to a chair and a table lamp, set against a window backdrop.
  - **Import Button**: A blue button labeled "+ Import" located in the top-right corner.

- **Top Bar (Right Side)**:
  - **Meta Horizon Logo**: A logo with the text "Meta Horizon" to the left.
  - **User Interface Elements**: Icons for messaging, search, and profile, arranged horizontally.

### Visual Flow / Relationships
- **Most Prominent Element**: The "My Assets" folder in the sidebar, as it is highlighted and expanded.
- **Arrows and Lines**: None explicitly shown, but the downward arrow suggests a dropdown interaction.
- **Spatial Relationships**: The sidebar is on the left, the main content area occupies the central space, and the top bar is at the very top.

</details>

<p></p>



[](https://video-dfw5-1.xx.fbcdn.net/v/t42.1790-2/453692983_3416887951779596_1166922568651522418_n.mp4?_nc_cat=110&ccb=1-7&_nc_sid=6500a6&_nc_ohc=heYMjjzzAHgQ7kNvwF83mb9&_nc_oc=Adl5s6FIOKc-ocsNxumTbYZvZW1vujcgGledjzOmmqjDWwsnQnw0LTBaSw2qxsvMLeqFG3meznXlCR7tUowmmHaO&_nc_zt=28&_nc_ht=video-dfw5-1.xx&_nc_gid=s-dMw-j-9TJjcglrAOZcOA&oh=00_AflPbjd1hOcU9qa-JunYwVkWdLvkl8GrjuYVo0yicYBtWw&oe=694102B2)

**Note**: We currently only accept JSON files.

- Go to <https://horizon.meta.com/creator/assets>
- Click **Import**, and select **Text**.
- Upload the asset. We only allow JSONs for now. You can use any valid .json you have, or download and upload the attached gamedatanew.JSON file at the bottom of the page.
  * [gamedatanew.json](https://scontent-dfw5-2.oculuscdn.com/v/t64.5771-25/39031405_1040126593784425_5457484484185452287_n.json?_nc_cat=107&ccb=1-7&_nc_sid=e280be&_nc_ohc=0xrmUsxJO30Q7kNvwEMb7_t&_nc_oc=AdkJnnQHX5Ae6zV8vGJ7s6zwXuW94SQYzpOuHLUSp76RPvqVxSK2-ihX_5wlgNvvkJtljV3F3pTLdnwtGbiCY5Jp&_nc_zt=3&_nc_ht=scontent-dfw5-2.oculuscdn.com&oh=00_Afm4LNx5IEj1wsP6RUKgXsaQB0N-ingFI6jnMvanW1uURw&oe=69559E07)
- You can download, edit and do other things with the Asset file, but this UI is the just the same as the Web Asset Ingestion UI.

### Desktop asset upload

<details>
<summary>Image Content</summary>

<p></p>

[All image details and metadata](../../image_data/34cd8c66820b5a716e150be9e4e8cc838da74cc15eaf0fecd01779d3138d9f93.md)

### Overview
The image depicts a user interface from a 3D modeling or game development software. The main focus is on the asset management section, showing a dropdown menu under the "Add New" label, which includes options such as Folder, 3D Model, Audio, Material, Skydome, Texture, and Text. Below the dropdown, there are three asset thumbnails labeled Rifle, SingleBlock, and StoneFloor. The interface has a dark theme with a grid background in the central viewport area.

### Key Elements
- **Left Panel**: Contains a search bar labeled "Hierarchy" and a SpawnPoint indicator. There’s also a filter icon near the top right.
- **Dropdown Menu**: Located below the "Add New" label, it displays a list of asset types with "Folder" highlighted.
- **Asset Thumbnails**: Three icons are displayed below the dropdown menu, each representing a different asset type.
- **Viewport**: A large central area shows a grid and a small blue object, likely a 3D model, in the distance.
- **Search Bar**: Positioned at the bottom right, labeled "Search My Assets."

### Visual Flow / Relationships
- The most prominent visual element is the dropdown menu, as it is actively expanded.
- The viewport is the secondary focal point, providing context for the assets being managed.
- The asset thumbnails are arranged horizontally beneath the dropdown menu.
- The search bar at the bottom right suggests functionality for finding specific assets within the interface.

</details>

<p></p>



[](https://video-dfw5-1.xx.fbcdn.net/v/t42.1790-2/453534048_1010445640344215_7233222472795927828_n.mp4?_nc_cat=103&ccb=1-7&_nc_sid=6500a6&_nc_ohc=ASo0VvEWwQIQ7kNvwELevsg&_nc_oc=AdmiTxh_QP3aelgJWLKlsQkJhScgcpFNzvKTm-K6q27m94YNuMaKyII3GNus4zsq3eF3HAJhmwIxdr9GNEdV4DHZ&_nc_zt=28&_nc_ht=video-dfw5-1.xx&_nc_gid=s-dMw-j-9TJjcglrAOZcOA&oh=00_Aflaz8zWDf3Ee9BYkib5AQNbQzonfcKhx5YWiU7o738AKg&oe=694129DD)

**Note**: We currently only accept JSON files.

- Open the Desktop Editor for Horizon.
- Click **Add New**, and select **Text**.
- Upload the asset. We only allow JSONs for now. You can use any valid json you have, or download and upload the attached gamedatanew.json file at the bottom of the page.
  * [gamedatanew.json](https://scontent-dfw5-2.oculuscdn.com/v/t64.5771-25/39031405_1040126593784425_5457484484185452287_n.json?_nc_cat=107&ccb=1-7&_nc_sid=e280be&_nc_ohc=0xrmUsxJO30Q7kNvwEMb7_t&_nc_oc=AdkJnnQHX5Ae6zV8vGJ7s6zwXuW94SQYzpOuHLUSp76RPvqVxSK2-ihX_5wlgNvvkJtljV3F3pTLdnwtGbiCY5Jp&_nc_zt=3&_nc_ht=scontent-dfw5-2.oculuscdn.com&oh=00_Afm4LNx5IEj1wsP6RUKgXsaQB0N-ingFI6jnMvanW1uURw&oe=69559E07)
- You can download, edit and do other things with the Asset file, but this UI is the just the same as the Desktop Asset Ingestion UI.

## Using the asset in TypeScript

[](https://video-dfw5-3.xx.fbcdn.net/v/t42.1790-2/453779137_471685212139725_99150541362208074_n.mp4?_nc_cat=109&ccb=1-7&_nc_sid=6500a6&_nc_ohc=X-K0vgNEh5UQ7kNvwHxhv0B&_nc_oc=AdncJl33nRDixqQv94IdBZWmNA_kbFwQtazgKL79hND6nWPEBDZC6w7zcecaoKDRy2hA1RpskWBhuUVfP3z57gXT&_nc_zt=28&_nc_ht=video-dfw5-3.xx&_nc_gid=s-dMw-j-9TJjcglrAOZcOA&oh=00_AflRo3T7H96PDBYvRBj4ZBAfcSfpFVPOi2XlDaUt47h2cw&oe=69412A6A)

Now that your asset is uploaded, you can pull the data from the asset to the TypeScript layer.

There are 2 ways to do this:

- Getting the reference to the asset in a component.
- Or, Creating a reference to the asset by providing the Asset ID, optionally, Asset version ID.

### Getting the reference to the asset in a component.

- Using a component, for example, your game manager, create a reference to a text asset.
- Pick from your available assets.
- Please note that your world will be referencing the Asset version at the moment of assigning. Updates to the Asset will not be reflected until you give a new reference to the asset. If you want your world to reference the latest version of the asset, use the method below of creating a new asset with ID reference.

### Creating a reference to the asset by providing the asset ID, optionally, asset version ID

- Create a new Asset, with an Asset ID. You can obtain this by inspecting the asset in your Desktop Editor Asset Library interface, or the Web Asset Library interface. Create a new Asset, with an Asset ID. You can obtain this by inspecting the asset in your Desktop Editor Asset Library interface, or the Web Asset Library interface.
- You can optionally provide the Asset version ID when creating the Asset. You can find this Asset version ID in the Web Asset Library interface.Your world will reference that version of the asset even if the Asset is updated.You can optionally provide the Asset version ID when creating the Asset. You can find this Asset version ID in the [Web Asset Library interface](https://horizon.meta.com/creator/assets). Your world will reference that version of the asset even if the Asset is updated.
  <details>
  <summary>Image Content</summary>
  
  <p></p>
  
  [All image details and metadata](../../image_data/4db9ff22d5fd1db0a534810c73012dcd1fd3d65fe5192bb54dfccc898281cd51.md)
  
  ### Overview
  This image depicts a modal window overlaying another interface, likely within a digital asset management tool. The modal contains information about an asset named "trivia," showing version details, asset metadata, and file download options.
  
  ### Key Elements
  - **Modal Window**: A light gray overlay with rounded corners, covering part of the underlying interface.
  - **Asset Icon**: Located at the top right of the modal, featuring a gradient cube icon with a white outline against a blue-to-purple gradient background.
  - **Version Details Section**: Below the icon, containing the text "Version details" followed by a version number highlighted in yellow.
  - **Asset Details Section**: Includes fields such as "Description," "Folder," "Creator," "Last edited," and "Asset ID." The "Folder" field shows "My Assets," while the "Creator" field has been blurred out.
  - **Download Button**: Positioned at the bottom right of the modal, labeled "Download" with a download icon preceding it.
  - **Close Button**: Located at the bottom right corner of the modal, with a "Close" label.
  
  ### Visual Flow / Relationships
  The most prominent visual element is the modal window itself, which is centered over the underlying interface. The asset icon is the secondary focal point, drawing attention to the specific asset being viewed. The version number is emphasized through highlighting, indicating its importance. The asset details and download button are arranged in a logical sequence, facilitating easy access to relevant information and actions.
  
  </details>
  
  <p></p>
  
  
- To reference the latest version of the Asset whenever it is updated, create a new Asset Object with the ID, but do not provide the optional version ID.
- For example `let asset = new Asset(ASSET_ID_BIGINT_HERE);`
- Please note that Asset loads are cached. If you are running the world, load the Asset and update it in the backend any new Asset loads will be the ones at time of asset load. You must restart the world to get your latest uploaded Asset version.

Once you retrieve the reference to the Asset object, you can fetch its data and use the following APIs to pull the asset as an object. Within the object, there are

* `asJson()`. You can provide an expected type to ensure that the JSON returned is of the intended type.
* `asText()`.

This script verifies whether you are able to pull asset data as a string:

```
import * as hz from 'horizon/core';

interface JSONData {
  qns_type: string;
  difficulty: string;
  category: string;
  question: string;
  correct_answer: string;
  incorrect_answers: string[];
}

/* Here's an example of the JSON data that will be passed in:
[
  {
    "qns_type": "boolean",
    "difficulty": "medium",
    "category": "General Knowledge",
    "question": "Why did the chicken cross the road",
    "correct_answer": "False",
    "incorrect_answers": [
      "True"
    ]
  },
  {
    "qns_type": "boolean",
    "difficulty": "medium",
    "category": "General Knowledge",
    "question": "Why did the cow go moo.",
    "correct_answer": "True",
    "incorrect_answers": [
      "False"
    ]
  }
]
*/

class CheckAssetIntegrity extends hz.Component<typeof CheckAssetIntegrity> {

  static propsDefinition = {
    textAsset: { type: hz.PropTypes.Asset },
  };

  allQnsData: JSONData[] | null = null;

  // called on world start

   async start() {
    let asset = this.props.textAsset!;

    /*
    // create a new Asset and do not provide the version id
    // if you want to reference the latest version
    // of the Asset
    let asset = new Asset(ASSET_ID_BIGINT_HERE); //
    */
    asset.fetchAsData().then((output: hz.AssetContentData) => {
      console.warn(asset.id + " \n" + asset.versionId);
      this.handleExtractAssetContentData(output);
    })
  }

  handleExtractAssetContentData(output: hz.AssetContentData) {
    var text = output.asText();
    console.log("Total text length: ", text.length);
    console.log("First 10 characters of the text for verification: ", text.substring(0, 10));
    console.log("==================================");
    var jsobj = output.asJSON();
    if (jsobj == null || jsobj == undefined) {
      console.error("null jsobj");
      return;
    }
    else {
      this.allQnsData = output.asJSON<JSONData[]>();
    }
  }
}

// This tells the UI that your component can be attached to an entity
hz.Component.register(CheckAssetIntegrity);
```

### Fetch asset options

The options parameter of the fetchAsData method provides the skipCache option, which skips the local cache when fetching asset data. To enable this option, set the skipCache option to true. This option is disable by default.

Enabling skipCache is only useful if you expect the asset that you are referencing to change while the world instance is running, and you have already accessed the asset. For example, if you modify your world assets in response to a live event outside of your live world instances. This is a rare circumstance so you should not enable skipCache most of the time.

## Examples

* A sample JSON file (trivia.json) with trivia questions in a JSON format. (More questions can be accessed via trivia APIs, such as [Open Trivia DB](https://opentdb.com/api_config.php)).
  + [trivia.json](https://scontent-dfw5-3.oculuscdn.com/v/t64.5771-25/39031427_790113296532639_7185274403668060489_n.json?_nc_cat=109&ccb=1-7&_nc_sid=e280be&_nc_ohc=jUeceImFACIQ7kNvwGKNfzV&_nc_oc=AdlkXAz-LyikIuljLw2tVhO9Pt2UH-R-E6UYt3su855BKiB5Lw04d77HoM41k6KRvjZpUA-IIy5oVDSxJW-FTEU_&_nc_zt=3&_nc_ht=scontent-dfw5-3.oculuscdn.com&oh=00_Afmyg6zttxBQXx7vLBXvuhkD4KLMOj-wBc7DKc9UAzmWVg&oe=69559C43)
* A Trivia world with a game manager script to load these questions from that JSON asset.
* A simple trigger script to allow for users to answer these trivia questions.
* You are able to load versions of Text Assets that were before the current version. This is helpful if you want to lock a version of the Asset to a particular world. You can do this by providing the actual values of the Asset IDs and the version IDs, like the code sample below. You may find more information regarding this in the asset templates.

  ```
    const assetId = BigInt(this.props.assetID); // use a string
    const versionId = BigInt(this.props.assetVerID);  // use a string
    asset = new hz.Asset(assetId, versionId);
  ```

<details>
<summary>Image Content</summary>

<p></p>

[All image details and metadata](../../image_data/4db9ff22d5fd1db0a534810c73012dcd1fd3d65fe5192bb54dfccc898281cd51.md)

### Overview
This image depicts a modal window overlaying another interface, likely within a digital asset management tool. The modal contains information about an asset named "trivia," showing version details, asset metadata, and file download options.

### Key Elements
- **Modal Window**: A light gray overlay with rounded corners, covering part of the underlying interface.
- **Asset Icon**: Located at the top right of the modal, featuring a gradient cube icon with a white outline against a blue-to-purple gradient background.
- **Version Details Section**: Below the icon, containing the text "Version details" followed by a version number highlighted in yellow.
- **Asset Details Section**: Includes fields such as "Description," "Folder," "Creator," "Last edited," and "Asset ID." The "Folder" field shows "My Assets," while the "Creator" field has been blurred out.
- **Download Button**: Positioned at the bottom right of the modal, labeled "Download" with a download icon preceding it.
- **Close Button**: Located at the bottom right corner of the modal, with a "Close" label.

### Visual Flow / Relationships
The most prominent visual element is the modal window itself, which is centered over the underlying interface. The asset icon is the secondary focal point, drawing attention to the specific asset being viewed. The version number is emphasized through highlighting, indicating its importance. The asset details and download button are arranged in a logical sequence, facilitating easy access to relevant information and actions.

</details>

<p></p>



## Notes

* Spawning a text asset does nothing.
* You cannot use this API to pull the data of a non-text asset. You will receive null data.
* You can only upload .JSONs files.
* Whenever you pull the data object, you are calling into the C# backend from the TS. This is performance intensive and should be done sparingly.
  + You may want to cache the .json object when you create it. The string is already cached when the object is created. If you are using it as a .JSON more than once, we recommend caching it once created.
  + Pull smaller .json files.
  + Pull when refreshing the world and during downtime.

## Performance

* Currently the Max asset file size is 8MB. The C# to TS bridge currently only accepts this much data in a single call, even though the asset library accepts files of up to 25MB.
  + Speed of upload to the Asset Library for a 1.8 MB file is ~5s.
  + Speed of download to TypeScript for a .json file of size 1.85MB in an empty world is ~2s
  + Speed of updates – How fast does it take to get the latest uploaded asset data?
    - It depends on your file size. We’ve seen 1KB files be updated almost immediately, while 5MB files may take up to 5 mins.
  + Do not use the skipCache option unless you are updating the asset while the world instance is live.

## Downloads

[gamedatanew.json](https://scontent-dfw5-2.oculuscdn.com/v/t64.5771-25/39031405_1040126593784425_5457484484185452287_n.json?_nc_cat=107&ccb=1-7&_nc_sid=e280be&_nc_ohc=0xrmUsxJO30Q7kNvwEMb7_t&_nc_oc=AdkJnnQHX5Ae6zV8vGJ7s6zwXuW94SQYzpOuHLUSp76RPvqVxSK2-ihX_5wlgNvvkJtljV3F3pTLdnwtGbiCY5Jp&_nc_zt=3&_nc_ht=scontent-dfw5-2.oculuscdn.com&oh=00_Afm4LNx5IEj1wsP6RUKgXsaQB0N-ingFI6jnMvanW1uURw&oe=69559E07)[trivia.json](https://scontent-dfw5-3.oculuscdn.com/v/t64.5771-25/39031427_790113296532639_7185274403668060489_n.json?_nc_cat=109&ccb=1-7&_nc_sid=e280be&_nc_ohc=jUeceImFACIQ7kNvwGKNfzV&_nc_oc=AdlkXAz-LyikIuljLw2tVhO9Pt2UH-R-E6UYt3su855BKiB5Lw04d77HoM41k6KRvjZpUA-IIy5oVDSxJW-FTEU_&_nc_zt=3&_nc_ht=scontent-dfw5-3.oculuscdn.com&oh=00_Afmyg6zttxBQXx7vLBXvuhkD4KLMOj-wBc7DKc9UAzmWVg&oe=69559C43)